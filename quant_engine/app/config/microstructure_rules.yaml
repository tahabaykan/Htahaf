# Microstructure Rules for Truth Tick, GRPAN, Volav
# Replaces FNRA/OTC flags with weighted print realism

print_realism:
  # Minimum size to be considered at all (under this ignored completely)
  min_lot_ignore: 20
  
  weights:
    # 100 or 200 lots are considered highest realism (institutional/smart money signature)
    lot_100_200: 1.0
    # Round large lots (300, 400, 500, 1000, 2000...)
    round_large: 0.4
    # Irregular/Odd lots > 20 (e.g. 58, 233)
    irregular: 0.2

confidence:
  # Maximum price offset nudge allowed based on confidence (in dollars)
  offset_cap: 0.01

slippage:
  # Bad slippage threshold based on ADV (Average Daily Volume)
  # Parsed in order: first match wins
  adv_thresholds:
    - { adv: 100000, bad_slip: 0.03 }
    - { adv: 40000,  bad_slip: 0.05 }
    - { adv: 10000,  bad_slip: 0.07 }
    - { adv: 2000,   bad_slip: 0.10 }
  
  # Fail-safe for very low ADV
  adv_default_bad_slip: 0.12
  
  # Minimum bad slip is also dynamic based on spread: max(base, multiplier * spread)
  spread_floor_multiplier: 0.25
